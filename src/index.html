<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>CrowdControl Platform</title>
    <script id="worker_ui" src="worker_ui.js"></script>
</head>
<body>
    <div id="ractive-container"></div>
<script>

    //from: http://stackoverflow.com/questions/901115/how-can-i-get-query-string-values-in-javascript
    function getQueryString(name) {
        var url = window.location.href;
        url = url.toLowerCase(); // This is just to avoid case sensitiveness
        name = name.replace(/[\[\]]/g, "\\$&").toLowerCase();// This is just to avoid case sensitiveness for query parameter name
        var regex = new RegExp("[?&]" + name + "(=([^&#]*)|&|#|$)"),
                results = regex.exec(url);
        if (!results) return null;
        if (!results[2]) return '';
        return decodeURIComponent(results[2].replace(/\+/g, " "));
    }

    var queryExperiment = getQueryString("experiment");

    init(queryExperiment);

    // initialize with properties
    function init(experimentID) {
        var properties = {
            workerServiceURL: "${WS_URL}",
            platform: "${PLATFORM}",
            experiment: experimentID,
            experimentsViewEnabled: true,
            experimentsViewLogoutButtonEnabled: true
        };

        // initialize settings
        WorkerUI.init(properties);

        WorkerUI.load();
    }


</script>
</body>
</html>