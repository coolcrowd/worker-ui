<html>
<script id="answerview" type="text/html">
    <div>
        <span id="question">The question will be loaded here</span>
        <div>
            <textarea name="answertext" value="{{content}}">Enter your answer here!</textarea>
        </div>
        {{loading}}

        <button on-click="submit">Submit</button>
        <button on-click="skip">Skip</button>
    </div>
</script>

<script id="ratingview" type="text/html">
    <div>
        <div id="answers">

            <div>
                <div>Answer here</div>
                <div>Rating here</div>
                <textarea name="feedback">Feedback here</textarea>
                <div id="constraints">
                    {{#colors}}
                    <label>
                        <input type='checkbox' name='{{selected}}' value='{{.}}' />{{.}}
                    </label>
                    {{/}}
                </div>
            </div>
        </div>

    </div>
</script>

<script>

</script>

<h3>Experiment zehn!</h3>

<!--
     1. This is the element we'll render our Ractive to.
-->
<div id='container'></div>

<!--
     2. You can load a template in many ways. For convenience, we'll include it in
     a script tag so that we don't need to mess around with AJAX or multiline strings.
     Note that we've set the type attribute to 'text/ractive' - though it can be
     just about anything except 'text/javascript'
-->


<!--
     3. You can always get the most recent stable version from the URL below.
     If you want the newest features (unstable!), use the 'edge' version instead:

         http://cdn.ractivejs.org/edge/ractive.min.js

     If you need IE8 support, change 'ractive' to 'ractive-legacy'.
-->
<script src='http://cdn.ractivejs.org/latest/ractive.min.js'></script>
<script src="http://code.jquery.com/jquery-2.0.0.js"></script>

<!--
     4. We've got an element in the DOM, we've created a template, and we've
     loaded the library - now it's time to build our Hello World app.
-->
<script>
    var

    var ractive = new Ractive({
        // The `el` option can be a node, an ID, or a CSS selector.
        el: '#container',

        // We could pass in a string, but for the sake of convenience
        // we're passing the ID of the <script> tag above.
        template: '#ratingview',

        // Here, we're passing in some initial data
        data: {
            name: 'world',
            loading: false,
            colors: ["red", "green", "blue"]
        }
    });


    var Promise = Ractive.Promise;

    ractive.set('name', "Simon");
    var ajax = $.ajax();

    ractive.on("skip", function () {
        ractive.set("loading", true)
    });

    $.ajax("creative_task.json").done(function (jsonTask) {

    });

    ractive.on('submit', function () {
        Promise.all([
            ractive.set('loading', true),
            $.getJSON('creative_task.json')
        ]).then(function (results) {
            var ajaxData = results[0];
            ractive.set({
                loading: false,
                list: ajaxData
            });
        });
    });


</script>
</html>
